Hamster Haruchi OS - 백엔드 및 자동화 시스템 구축
✅ 적용된 개선사항 (v1.0.0 Backend)
1. 시스템 아키텍처 (Backend)
Node.js 환경 구축: @notionhq/client를 활용한 노션 API 연동 스크립트(index.js) 작성.

중앙화된 설정 관리: CONFIG 객체를 통해 DB ID, 속성 이름(한글), XP 규칙을 한곳에서 관리하여 유지보수성 증대.

환경 변수 분리: .env 파일을 통해 API Key, DB ID, 캐릭터 Page ID 등 민감 정보 보안 처리.

2. 데이터베이스 연동 및 정규화
6개 소스 DB 통합 감지:

할일 DB: 완료 체크 시 감지 (속성명: 할 일)

루틴 DB: 완료 체크 시 감지 (속성명: 이름)

운동 DB: 완료 체크 시 감지 (속성명: 운동)

독서 DB (세션): 완료 체크 시 감지 (속성명: 세션 이름)

책형 DB (완독): 상태가 '완독'일 때 감지 (속성명: 책 이름)

SNS DB: 상태가 '발행'일 때 감지 (속성명: 제목)

타겟 DB (XP 로그) 구조화:

로그 제목 포맷 통일: [타입] · [원본제목] · [XP]XP

관계형 속성 자동 연결: 각 원본 DB 및 하루치 캐릭터 페이지와 자동 연결.

3. 게이미피케이션 로직 (Gamification)
활동별 차등 XP 지급 구현:

기본 활동: 할일(10 XP), 루틴(20 XP), 독서 세션(40 XP), 운동(80 XP)

특수 활동 (책): 완독 보너스 XP 속성값 우선 적용 (없을 시 기본 300 XP)

특수 활동 (SNS): 플랫폼별 차등 지급 (쓰레드 20 / 인스타 30 / 블로그 80 / 그 외 10)

하루치 캐릭터 성장 연동:

모든 XP 로그 생성 시 하루치 관계형 속성에 캐릭터 Page ID 자동 연결.

이를 통해 노션 내 Rollup(롤업) 기능으로 총 경험치 및 레벨 자동 합산 가능.

4. 안정성 및 중복 방지 (Anti-Abuse)
XP 지급됨(Granted) 플래그 시스템:

모든 소스 DB에 XP 지급됨 체크박스 도입.

로직: 완료=True AND XP 지급됨=False인 항목만 조회.

처리 완료 후: 스크립트가 해당 항목의 XP 지급됨을 true로 업데이트하여 중복 지급 원천 차단.

📋 추후 구현 예정 (To-Do)
실시간성 강화: 현재 폴링(Polling) 방식에서 Webhook 또는 더 짧은 주기 실행(Cron) 고려.

에러 알림: 동기화 실패 시 디스코드/슬랙 등으로 알림 전송 기능.

프론트엔드 시각화: 현재 구축된 백엔드 데이터를 바탕으로 웹(다마고치 화면)에서 레벨업/경험치 바 애니메이션 연동.

레벨업 보상: 특정 레벨 도달 시 하루치 스킨 변경 로직 고도화.